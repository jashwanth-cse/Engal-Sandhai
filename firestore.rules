rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // ✅ Allow specific UIDs
    function isAllowedUser() {
      return request.auth.uid in [
        "xKQsk1R0wDaL4kW57phHrcoGr7n1",  // You
        "UID_2_OF_MEMBER",              // Member 2
        "UID_3_OF_MEMBER"               // Member 3
      ];
    }

    // ✅ Allow users with role = "admin"
    function isAdmin() {
      return get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == "admin";
    }

    // ✅ Allow users with role = "faculty"
    function isFaculty() {
      return get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == "faculty";
    }
    

    match /{document=**} {
      // ✅ NOT CLOSED
      allow read, write: if request.auth != null 
                         && (isAllowedUser() || isAdmin());
    }
    
  }
}